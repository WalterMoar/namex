<dataConfig>
    <dataSource name="corps-ds" type="com.s24.search.solr.analysis.jdbc.DataImportJdbcDataSource"
                dataSource="jdbc/bcrs_corps" />

    <dataSource name="names-ds" type="com.s24.search.solr.analysis.jdbc.DataImportJdbcDataSource"
                dataSource="jdbc/postgresql" />

    <document>
        <entity name="corp-conflicts" dataSource="corps-ds" pk="id"
                query="SELECT id, name, 'CORP' AS source FROM bc_registries.solr_conflicts_core_vw WHERE state =
                        'ACTIVE'"
                deltaImportQuery="SELECT id, name, 'CORP' AS source FROM bc_registries.solr_conflicts_core_vw WHERE id
                        = '${dih.delta.id}'"
                deltaQuery="SELECT id FROM bc_registries.solr_conflicts_core_vw WHERE state = 'ACTIVE' AND
                        last_modified &gt; TO_TIMESTAMP('${dih.last_index_time}', 'YYYY-MM-DD HH24:MI:SS')
                        AT TIME ZONE 'AMERICA/VANCOUVER'"
                deletedPkQuery="SELECT id FROM bc_registries.solr_conflicts_core_vw WHERE state = 'INACTIVE' AND
                        last_modified &gt; TO_TIMESTAMP('${dih.last_index_time}', 'YYYY-MM-DD HH24:MI:SS')
                        AT TIME ZONE 'AMERICA/VANCOUVER'"
        />

        <entity name="name-conflicts" dataSource="names-ds" pk="id"
                query="SELECT id, name, 'NR' AS source FROM solr_conflicts_core_vw WHERE state = 'ACTIVE'"
                deltaImportQuery="SELECT id, name, 'NR' AS source FROM solr_conflicts_core_vw WHERE id =
                        '${dih.delta.id}'"
                deltaQuery="SELECT id FROM solr_conflicts_core_vw WHERE state = 'ACTIVE' AND
                        last_modified &gt; TO_TIMESTAMP('${dih.last_index_time}', 'YYYY-MM-DD HH24:MI:SS')"
                deletedPkQuery="SELECT id FROM solr_conflicts_core_vw WHERE state = 'INACTIVE' AND
                        last_modified &gt; TO_TIMESTAMP('${dih.last_index_time}', 'YYYY-MM-DD HH24:MI:SS')"
        />
    </document>
</dataConfig>
